# MedDRA 증상 검색 프로그램 테스트 예제

## 실행 결과 예시

### 1. 두통 검색

**명령어:**
```bash
python3 meddra_cli.py -s "두통" -r
```

**출력 (일부):**
```
======================================================================
총 51개의 결과를 찾았습니다.
======================================================================

[결과 1]
  LLT: 머리띠로 조이는 듯한 두통 (코드: 10004087)
  ↓
  PT:  긴장성 두통 (코드: 10043269)

  📋 전체 계층 구조:
     SOC:  각종 신경계 장애 (Nerv, 10029205)
       ↓
     HLGT: 각종 두통 (10019231)
       ↓
     HLT:  두통 NEC (10019233)
       ↓
     PT:   긴장성 두통 (10043269)

  🔗 관련 증상 (같은 HLT):
     • 심장성 두통 (10091734)
     • 눈 근육 마비 편두통 (10050122)
     • 두경부 증후군 (10077374)
     • 약물 금단성 두통 (10013753)
     • 약물 남용성 두통 (10072720)
```

---

### 2. 복통 검색

**명령어:**
```bash
python3 meddra_cli.py -s "복통"
```

**출력:**
```
======================================================================
총 3개의 결과를 찾았습니다.
======================================================================

[결과 1]
  LLT: 복통 (코드: 10000081)
  ↓
  PT:  복통 (코드: 10000081)

  📋 전체 계층 구조:
     SOC:  각종 위장관 장애 (Gastr, 10017947)
       ↓
     HLGT: 위장관 징후 및 증상 (10018012)
       ↓
     HLT:  위장관 및 복부 통증(구강 및 인후 제외) (10017926)
       ↓
     PT:   복통 (10000081)

----------------------------------------------------------------------

[결과 2]
  LLT: 소화성 궤양형 복통 (코드: 10000086)
  ↓
  PT:  상복부 통증 (코드: 10000087)

  📋 전체 계층 구조:
     SOC:  각종 위장관 장애 (Gastr, 10017947)
       ↓
     HLGT: 위장관 징후 및 증상 (10018012)
       ↓
     HLT:  위장관 및 복부 통증(구강 및 인후 제외) (10017926)
       ↓
     PT:   상복부 통증 (10000087)
```

---

### 3. PT 코드로 상세 정보 조회

**명령어:**
```bash
python3 meddra_cli.py -d 10019211
```

**출력:**
```
======================================================================
PT 상세 정보: 두통 (10019211)
======================================================================

📋 Primary 계층 구조:
   SOC:  각종 신경계 장애 (Nerv, 10029205)
     ↓
   HLGT: 각종 두통 (10019231)
     ↓
   HLT:  두통 NEC (10019233)
     ↓
   PT:   두통 (10019211)

📝 관련 LLT (최하위 용어) - 총 41개:
   • 머리 통증 (10008013)
   • 이마 두통 (10016998)
   • 머리 통증 (10019198)
   • 머리가 욱신거림 (10019204)
   • 두통 (10019211)
   • 두통 악화(편두통 제외) (10019212)
   • 둔한 두통 (10019215)
   • 꽉 찬 느낌의 두통 (10019216)
   • 두통 NOS (10019218)
   • 두통 악화 NOS (10019219)
   ... (더 많은 용어들)

🔗 관련 증상 (같은 HLT) - 총 10개:
   • 심장성 두통 (10091734)
   • 눈 근육 마비 편두통 (10050122)
   • 두경부 증후군 (10077374)
   • 약물 금단성 두통 (10013753)
   • 약물 남용성 두통 (10072720)
   • 외상-후 두통 (10036313)
   • 목성 통증 (10064888)
   • 만성 발작성 편두통 (10009094)
   • 부비동 두통 (10040744)
   • 긴장성 두통 (10043269)

======================================================================
```

---

### 4. 대화형 모드

**명령어:**
```bash
python3 meddra_cli.py
```

**사용 예시:**
```
============================================================
MedDRA 증상 검색 시스템 초기화 중...
============================================================
Loading LLT data from ../ascii-281/llt.asc...
✓ Loaded 81143 active LLTs
Loading PT data from ../ascii-281/pt.asc...
✓ Loaded 27163 PTs
Loading hierarchy data from ../ascii-281/mdhier.asc...
✓ Loaded 42221 hierarchy records

✓ 초기화 완료!


======================================================================
MedDRA 증상 검색 시스템 - 대화형 모드
======================================================================

명령어:
  - 증상 입력: 검색할 증상을 입력하세요 (예: 두통, 복통)
  - 'detail <PT코드>': PT 코드의 상세 정보 조회
  - 'help': 도움말 표시
  - 'quit' 또는 'exit': 종료

======================================================================

증상 입력 > 어지러움

======================================================================
총 3개의 결과를 찾았습니다.
======================================================================

[결과 1]
  LLT: 어지러움 (코드: 10013573)
  ↓
  PT:  어지러움 (코드: 10013573)

  📋 전체 계층 구조:
     SOC:  각종 신경계 장애 (Nerv, 10029205)
       ↓
     HLGT: 신경학적 장애 NEC (10029305)
       ↓
     HLT:  신경학적 징후 및 증상 NEC (10029306)
       ↓
     PT:   어지러움 (10013573)

  🔗 관련 증상 (같은 HLT):
     • 각성 증가 (10074054)
     • 경과 악화 (10000028)
     • 다발성 신경병증 (10033874)
     ...

----------------------------------------------------------------------

증상 입력 > detail 10013573

======================================================================
PT 상세 정보: 어지러움 (10013573)
======================================================================
...

증상 입력 > quit

종료합니다. 감사합니다!
```

---

## 테스트 케이스

### 기본 증상 검색

| 증상 | 결과 수 | 주요 PT | SOC |
|------|---------|---------|-----|
| 두통 | 51개 | 두통 (10019211) | 신경계 |
| 복통 | 3개 | 복통 (10000081) | 위장관 |
| 어지러움 | 3개 | 어지러움 (10013573) | 신경계 |
| 발열 | 30개+ | 발열 (10037660) | 전신 |
| 오심 | 10개+ | 오심 (10028813) | 위장관 |
| 구토 | 50개+ | 구토 (10047700) | 위장관 |

### 부분 일치 검색

```bash
# "통증" 검색 - 모든 종류의 통증 찾기
python3 meddra_cli.py -s "통증"

# 결과: 두통, 복통, 요통, 관절통, 근육통 등 100개 이상
```

### 관련 증상 탐색

```bash
# 두통과 관련된 다른 증상들 찾기
python3 meddra_cli.py -s "두통" -r

# 결과: 긴장성 두통, 편두통, 군발성 두통 등
```

---

## 성능 테스트

### 초기화 시간
- LLT 로딩: 약 2-3초 (81,143개 용어)
- PT 로딩: 약 1초 (27,163개 용어)
- 계층 로딩: 약 2초 (42,221개 레코드)
- **총 초기화 시간: 약 5-6초**

### 검색 속도
- 단일 검색: < 0.1초
- 부분 일치 검색 (100개+ 결과): < 0.5초
- 상세 정보 조회: < 0.1초

---

## 검증 체크리스트

✅ LLT 검색 기능 작동
✅ PT 매핑 정확성
✅ 계층 정보 조회
✅ Primary/Secondary SOC 구분
✅ 관련 증상 표시
✅ 상세 정보 조회
✅ 대화형 모드
✅ 명령행 옵션
✅ 한글 인코딩 (UTF-8)
✅ 에러 처리

---

## 알려진 제한사항

1. **초기화 시간**: 매번 실행 시 데이터 로딩 필요 (약 5-6초)
   - 해결: 인덱스 파일 캐싱 기능 추가 가능

2. **메모리 사용**: 전체 데이터를 메모리에 로드 (약 200-300MB)
   - 해결: SQLite 데이터베이스 사용 옵션 추가 가능

3. **검색 범위**: LLT 이름 부분 일치만 지원
   - 해결: 형태소 분석, 유사어 검색 기능 추가 가능

---

**테스트 완료일**: 2025-10-14
**테스트 환경**: Python 3.x, MedDRA 28.1 Korean
