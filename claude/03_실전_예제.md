# MedDRA 실전 활용 예제

## 개요

실제 약물감시 업무에서 자주 발생하는 시나리오와 해결 방법을 제시합니다.

## 예제 1: 환자 증상 입력 → 코드 검색

### 시나리오
환자가 "머리가 아파요"라고 증상을 호소했습니다.

### 해결 과정

#### Step 1: LLT 검색

```bash
grep "두통" ascii-281/llt.asc | grep "Y\$\$$"
```

**결과:**
```
10019211$두통$10019211$$$$$$$Y$$
10019212$두통 NOS$10019211$$$$$$$Y$$
10027599$긴장성 두통$10027599$$$$$$$Y$$
10027606$군발성 두통$10027606$$$$$$$Y$$
10027607$편두통$10027607$$$$$$$Y$$
```

#### Step 2: 가장 일반적인 용어 선택

"두통" (10019211)이 가장 일반적인 용어입니다.

#### Step 3: 계층 정보 확인

```bash
grep "^10019211\$" ascii-281/mdhier.asc
```

**결과:**
```
10019211$10019233$10019231$10029205$두통$두통 NEC$각종 두통$각종 신경계 장애$Nerv$$10029205$Y$
```

#### Step 4: 최종 결과

```
코드: 10019211
용어: 두통
HLT: 두통 NEC (10019233)
HLGT: 각종 두통 (10019231)
SOC: 각종 신경계 장애 (10029205)
```

---

## 예제 2: 모호한 증상 처리

### 시나리오
환자가 "속이 안 좋아요"라고 애매하게 표현했습니다.

### 해결 과정

#### Step 1: 관련 용어 광범위 검색

```bash
# 여러 키워드로 검색
grep -E "속\|위\|소화" ascii-281/llt.asc | grep "Y\$\$$" | head -20
```

**가능한 매칭:**
- 위 불쾌감 (10082224)
- 소화 불량 (10013946)
- 복부 불편감 (10000059)
- 오심 (10028813)

#### Step 2: 추가 질문으로 구체화

환자에게 더 구체적인 질문:
- "속이 쓰린가요?" → 위염 관련
- "토할 것 같나요?" → 오심/구토
- "배가 아픈가요?" → 복통

#### Step 3: 적절한 코드 선택

환자가 "토할 것 같아요"라고 추가 답변:

```bash
grep "오심\|구역" ascii-281/llt.asc | grep "Y\$\$$"
```

**최종 선택:**
```
코드: 10028813
용어: 오심
```

---

## 예제 3: 동일 증상의 다른 표현

### 시나리오
환자 A: "어지러워요"
환자 B: "현기증이 나요"
환자 C: "빙빙 돌아요"

### 해결 과정

#### 각 표현 검색

```bash
# 어지러움
grep "어지러" ascii-281/llt.asc | grep "Y\$\$$"
# 결과: 10013573$어지러움$10013573$$$$$$$Y$$

# 현기증
grep "현기증" ascii-281/llt.asc | grep "Y\$\$$"
# 결과: 10047340$현기증$10047340$$$$$$$Y$$

# 회전성 어지러움
grep "회전" ascii-281/llt.asc | grep "Y\$\$$"
# 결과: 10047340$회전성 현기증$10047340$$$$$$$Y$$
```

#### 차이점 이해

**어지러움 (10013573):**
- 일반적인 어지러움
- 신경계 장애로 분류

**현기증 (10047340):**
- 회전성 감각을 동반하는 어지러움
- 귀 및 미로 장애로 분류

```bash
# 계층 확인
grep "^10013573\$\|^10047340\$" ascii-281/mdhier.asc | grep "Y\$"
```

**결과:**
```
10013573$10029306$10029305$10029205$어지러움$신경학적 징후 및 증상 NEC$신경학적 장애 NEC$각종 신경계 장애$Nerv$$10029205$Y$
10047340$10013952$10013950$10013993$현기증$균형 장애$귀 장애 NEC$귀 및 미로 장애$Ear$$10013993$Y$
```

#### 올바른 선택

- 일반적 어지러움 → **10013573 (어지러움)**
- 회전하는 느낌 → **10047340 (현기증)**

---

## 예제 4: 여러 증상 동시 코딩

### 시나리오
환자가 "머리가 아프고, 열이 나고, 토할 것 같아요"라고 호소했습니다.

### 해결 과정

#### 증상별 코딩

```bash
# 1. 두통
grep "^10019211\$" ascii-281/pt.asc
# → 10019211$두통

# 2. 발열
grep "발열\|열" ascii-281/llt.asc | grep "Y\$\$$" | head -5
# → 10037660$발열

# 3. 오심
grep "^10028813\$" ascii-281/pt.asc
# → 10028813$오심
```

#### 최종 코딩 결과

| 증상 | PT 코드 | PT명 | SOC |
|------|---------|------|-----|
| 두통 | 10019211 | 두통 | 각종 신경계 장애 |
| 발열 | 10037660 | 발열 | 전신 장애 및 투여 부위 병태 |
| 오심 | 10028813 | 오심 | 각종 위장관 장애 |

---

## 예제 5: 부작용 보고서 작성

### 시나리오
약물 X 복용 후 환자에게 다음 증상 발생:
- 두드러기
- 가려움증
- 호흡곤란

### 해결 과정

#### Step 1: 각 증상 코딩

```bash
# 두드러기
grep "두드러기" ascii-281/llt.asc | grep "Y\$\$$"
# → 10046735$두드러기$10046735

# 가려움증
grep "가려" ascii-281/llt.asc | grep "Y\$\$$"
# → 10037087$가려움증$10037087

# 호흡곤란
grep "호흡곤란" ascii-281/llt.asc | grep "Y\$\$$"
# → 10013963$호흡곤란$10013963
```

#### Step 2: SOC 분류 확인

```bash
grep "^10046735\$\|^10037087\$\|^10013963\$" ascii-281/mdhier.asc | grep "Y\$"
```

**결과:**
```
10046735$...$피부 및 피하 조직 장애$Skin$$Y$
10037087$...$피부 및 피하 조직 장애$Skin$$Y$
10013963$...$호흡기, 흉곽 및 종격 장애$Resp$$Y$
```

#### Step 3: 심각성 평가

호흡곤란 + 두드러기 조합 → **아나필락시스 반응 가능성**

추가 검색:
```bash
grep "아나필락시스\|과민" ascii-281/llt.asc | grep "Y\$\$$"
```

#### Step 4: 보고서 작성

**부작용 코딩:**
1. **주 사건**: 아나필락시스 반응 (10002198)
2. **세부 증상들**:
   - 두드러기 (10046735)
   - 가려움증 (10037087)
   - 호흡곤란 (10013963)

---

## 예제 6: 검사 결과 이상 코딩

### 시나리오
혈액 검사 결과: "ALT 상승, AST 상승"

### 해결 과정

```bash
# ALT 검색
grep "ALT\|알라닌" ascii-281/llt.asc | grep "Y\$\$$"

# AST 검색
grep "AST\|아스파르트산" ascii-281/llt.asc | grep "Y\$\$$"
```

**결과:**
```
10001551$알라닌 아미노전이효소 증가$10001551$$$$$$$Y$$
10003481$아스파르트산 아미노전이효소 증가$10003481$$$$$$$Y$$
```

**최종 코딩:**
- ALT 증가: 10001551
- AST 증가: 10003481
- SOC: 각종 임상 검사 (10022891)

---

## 예제 7: 관련 증상 찾기

### 시나리오
"복통"과 관련된 다른 위장관 증상들을 모두 찾고 싶습니다.

### 해결 과정

#### Step 1: 복통의 HLT 확인

```bash
grep "^10000081\$" ascii-281/mdhier.asc
# HLT: 10017926 (위장관 및 복부 통증)
```

#### Step 2: 같은 HLT의 모든 PT 찾기

```bash
grep "^10017926\$" ascii-281/hlt_pt.asc | cut -d'$' -f2 > related_pts.txt
```

#### Step 3: PT 이름 확인

```bash
while read pt_code; do
    grep "^${pt_code}\$" ascii-281/pt.asc | cut -d'$' -f1,2
done < related_pts.txt | head -15
```

**결과 예시:**
```
10000081$복통
10000084$하복부 통증
10000087$상복부 통증
10003699$대장 통증
10003970$담관 통증
10015311$심와부 불쾌감
10017890$위 통증
...
```

---

## 예제 8: 약물별 부작용 통계

### 시나리오
약물 X의 부작용 데이터베이스에서 가장 흔한 SOC를 분석하려고 합니다.

### 해결 과정

#### Step 1: 모든 PT 코드 수집

```python
# 가상의 부작용 데이터
adverse_events = [
    10019211,  # 두통
    10028813,  # 오심
    10013573,  # 어지러움
    10037660,  # 발열
    10019211,  # 두통 (중복)
    10013573,  # 어지러움 (중복)
]
```

#### Step 2: 각 PT의 SOC 매핑

```bash
for pt_code in 10019211 10028813 10013573 10037660; do
    grep "^${pt_code}\$" ascii-281/mdhier.asc | grep "Y\$" | cut -d'$' -f4,8
done
```

**결과:**
```
10029205$각종 신경계 장애        # 두통
10017947$각종 위장관 장애        # 오심
10029205$각종 신경계 장애        # 어지러움
10018065$전신 장애 및 투여 부위 병태  # 발열
```

#### Step 3: SOC별 집계

```
각종 신경계 장애: 3건 (50%)
각종 위장관 장애: 1건 (16.7%)
전신 장애: 1건 (16.7%)
```

---

## 예제 9: 유사 증상 그룹화

### 시나리오
"통증" 관련 모든 용어를 카테고리별로 분류하고 싶습니다.

### 해결 과정

#### Step 1: "통증" 포함 PT 검색

```bash
grep "통증" ascii-281/pt.asc | cut -d'$' -f1,2 | head -20
```

#### Step 2: SOC별 분류

```bash
# 각 PT의 계층 정보 조회
while read line; do
    pt_code=$(echo $line | cut -d'$' -f1)
    grep "^${pt_code}\$" ascii-281/mdhier.asc | grep "Y\$" | cut -d'$' -f1,5,8
done < pain_pts.txt
```

**결과 예시:**
```
신경계:
- 10019211$두통
- 10029331$신경통

위장관계:
- 10000081$복통
- 10017890$위 통증

근골격계:
- 10003239$관절통
- 10028391$근육통
```

---

## 예제 10: 버전 변경 추적

### 시나리오
버전 28.0에서 28.1로 업데이트되면서 "복통" 관련 용어에 변경이 있는지 확인하려고 합니다.

### 해결 과정

#### Step 1: Sequential 파일 확인

```bash
grep "복통" seq-281/*.seq
```

#### Step 2: 변경 내역 분석

```bash
# LLT 변경사항
grep "복통" seq-281/llt.seq

# PT 변경사항
grep "10000081" seq-281/pt.seq

# 계층 변경사항
grep "10000081" seq-281/mdhier.seq
```

**결과 해석:**
- M = Modified (수정됨)
- A = Added (추가됨)
- I = Inactivated (비활성화됨)

---

## 실전 팁

### 1. 동의어 사전 구축
```
"배아픔" → "복통"
"속쓰림" → "위 불쾌감"
"머리아픔" → "두통"
```

### 2. 자주 사용하는 코드 캐싱
```python
COMMON_SYMPTOMS = {
    "두통": "10019211",
    "복통": "10000081",
    "오심": "10028813",
    "발열": "10037660",
    "어지러움": "10013573"
}
```

### 3. 검색 우선순위
1. 정확한 일치 (exact match)
2. 부분 일치 (partial match)
3. 유사어 검색 (synonym search)

### 4. 코딩 시 체크리스트
- [ ] LLT currency = Y 확인
- [ ] Primary SOC 확인
- [ ] 다중 증상 시 각각 코딩
- [ ] 심각한 부작용 시 상위 개념 추가 고려

---

## 다음 단계

SMQ(Standardised MedDRA Queries)를 활용한 고급 검색은 [04_SMQ_활용.md](04_SMQ_활용.md)를 참조하세요.
